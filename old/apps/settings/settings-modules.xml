<?xml version="1.0" encoding="UTF-8" ?>
<!-- This is a WordPress eXtended RSS file generated by WordPress as an export of your site. -->
<!-- It contains information about your site's posts, pages, comments, categories, and other content. -->
<!-- You may use this file to transfer that content from one site to another. -->
<!-- This file is not intended to serve as a complete backup of your site. -->

<!-- To import this information into a WordPress site follow these steps: -->
<!-- 1. Log in to that site as an administrator. -->
<!-- 2. Go to Tools: Import in the WordPress admin panel. -->
<!-- 3. Install the "WordPress" importer from the list. -->
<!-- 4. Activate & Run Importer. -->
<!-- 5. Upload this file using the form provided on that page. -->
<!-- 6. You will first be asked to map the authors in this export file to users -->
<!--    on the site. For each author, you may choose to map to an -->
<!--    existing user on the site or to create a new user. -->
<!-- 7. WordPress will then import each of the posts, pages, comments, categories, etc. -->
<!--    contained in this file into your site. -->
<!-- 8. Version 1.0 -->

	
<rss version="2.0"
	xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:wp="http://wordpress.org/export/1.2/"
>

<channel>
	<title>ilsnxt.wordpoets.com</title>
	<link>http://ilsnxt.wordpoets.com</link>
	<description></description>
	<pubDate>Mon, 28 Sep 2020 04:40:08 +0000</pubDate>
	<language>en-US</language>
	<wp:wxr_version>1.2</wp:wxr_version>
	<wp:base_site_url>http://ilsnxt.wordpoets.com</wp:base_site_url>
	<wp:base_blog_url>http://ilsnxt.wordpoets.com</wp:base_blog_url>

		<wp:author><wp:author_id>12</wp:author_id><wp:author_login><![CDATA[praveen]]></wp:author_login><wp:author_email><![CDATA[praveen.g@amiworks.com]]></wp:author_email><wp:author_display_name><![CDATA[Praveen Gupta]]></wp:author_display_name><wp:author_first_name><![CDATA[Praveen]]></wp:author_first_name><wp:author_last_name><![CDATA[Gupta]]></wp:author_last_name></wp:author>

				
	

		<item>
		<title>Home</title>
		<link>http://ilsnxt.wordpoets.com/?post_type=m_settings&#038;p=867866</link>
		<pubDate>Thu, 21 May 2020 11:26:55 +0000</pubDate>
		<dc:creator><![CDATA[praveen]]></dc:creator>
		<guid isPermaLink="false">http://ilsnxt.wordpoets.com/?post_type=m_settings&#038;p=867866</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]

  //** 
  1. Table prefix.. Done
  2. Store extra params in ticket.. Done
  3. Bulk meta update.. Done
  4. Form prefill if settings already present... Half done, few inputs not showing prefill yet.. TODO
  **//

	[if.empty qs.0]
  	[php.wp_redirect p1="/settings/home/settings/" /]
	[/if.empty]

	[css.style]
  	.alert {
    	margin-left:20px;
    }
  	.main-content-wrapper {
    	padding: 40px 40px 40px 20px;
    }
  	.app-menu-wrapper .nav-tabs{
    	border-bottom:none;
    }
    .app-menu-wrapper .navbar-nav>li>a {
      padding-top: 5px;
      padding-bottom: 5px;
    }
  	.app-menu-wrapper .app-list li{
    	//border-bottom: 4px solid #0674ad;
      margin: 5px;
      //border-radius: 5px;
      background: #f3f3f3;
      	&:hover{
        	background: #e2e2e3;
        }
    }
    .app-menu-wrapper .app-list li.active{
    	background: #294858;
      a{
      	color:#fff;
      }
    }
    .app-menu-wrapper .app-list li.active:after {
      content: '';
      position: absolute;
      left: 100%;
      top: 50%;
      margin-top: -13px;
      border-left: 0;
      border-bottom: 13px solid transparent;
      border-top: 13px solid transparent;
      border-left: 10px solid #294858;
    }
    
    //** admission-menu-tabs **//
    .admission-menu-tabs .nav-tabs>li> {
    	border:1px solid #ccc;
      	&:hover{
        	background: #f3f3f3;
          margin-right: 0px;
        }
        a {
        	border: 0px solid transparent;
          border-radius: 0;
        }
     }
     .admission-menu-tabs .active a{
      background: #f3f3f3 !important;
      margin-right: 0px;
      border:0px !important;
     }
     .nav-tabs>li.active>a{
     	cursor: pointer;
     }
  [/css.style]

  //** Get APP where post content not null**//
  [query.get_results set="template.all_apps_settings"]
    SELECT post_type as app_slug FROM [aw2.get wpdb.prefix /]posts WHERE post_name="settings" AND TRIM(post_content)<>''
	[/query.get_results]

	[loop.eachSlug template.all_apps_settings]
  	[aw2.get eachSlug.item.app_slug set="settings_app.new" /]
  [/loop.eachSlug]

  //**Content Area**//
  <div class="mng-wrapper">
  	<div class="row">

    	//** Left sidebar of App Settings**//
      <div class="col-md-2">
      	<div class="gap-7"></div>
      	<div class="app-menu-wrapper is-flex justify-content-center">
          <ul class="app-list nav nav-tabs1 navbar-nav1">
            [loop.eachApp apps]
              [php.in_array p1="{eachApp.item.collection.config.post_type}" p2="{settings_app}" set="app_setting_exists" /]
              [if.true app_setting_exists]
                <li class='[if.equal rhs="{eachApp.key}" lhs="{qs.0}"]active[/if.equal]'>
                  <a href="[php.site_url /]/settings/home/[aw2.get eachApp.key /]/" class="app_setting">
                    [aw2.get eachApp.item.name /]
                  </a>
                </li>
              [/if.true]
            [/loop.eachApp]
          </ul>
        </div>
      </div>

      //** Right Content area of App Settings**//
      <div class="col-md-10">
        <h3 class="text-center"> Edit Settings </h3>

					[env.set settings_navigation='' /]

					[templates.run get_form_config app_name="{qs.0}" config_array="{qs.1}" /]

          [template.set form_array_name="{qs.1}" /]
          [loop.eachNav env.settings_navigation.navs]
            [if.equal lhs="{eachNav.item.default_form}" rhs="yes" empty="{qs.1}"]
              [template.set form_array_name="{eachNav.key}" /]
            [/if.equal]
          [/loop.eachNav]


//**
If only one tab... do not show
[if.greater_than lhs="{env.settings_navigation.navs.count}" rhs="1" not_empty="{settings_navigation}"] **//
					<div class="admission-menu-tabs">
            <ul class="nav nav-tabs">
              [loop.eachNav env.settings_navigation.navs]
                <li class='[if.equal rhs="{template.form_array_name}" lhs="{eachNav.key}"]active[/if.equal]'>
                  <a href="/[aw2.get app.slug /]/[aw2.get app.active.module /]/[aw2.get qs.0 /]/[aw2.get eachNav.key /]/">[aw2.get eachNav.item.label /]</a>
                </li>
              [/loop.eachNav]
            </ul>
          </div>
        //** [/if.greater_than] **//

        <div class="form-content">
        	<div class="gap-6"></div>

          [if.not_empty template.form_array_name]
          	[env.get {template.form_array_name} set="template.config_array" /]

            [template.set_array extra_params  
                    post_id="{{aw2.get env.postdata.ID}}" 
                    app="{qs.0}" 
                    config_array="{template.form_array_name}" /]
                
						[aw_form.create 
                form-config='{template.config_array}' 
                collection_type='m_settings' 
                submit_to='home.save_setting' 
                extra_params='{template.extra_params}' 
							/]
          [/if.not_empty]
          [if.else]
          	[if.equal lhs="{qs.0}" rhs=""]
          		<center>Select App from left side</center>
            [/if.equal]
          [/if.else]

        </div>
  			<div class="gap-4"></div>
      </div>
    </div>
  </div>
[/templates.add]

//** Save template for save the details**//
[templates.add save_setting]

		[session_ticket.get {request.id} set="template.ticket_data" /]

		[templates.run get_form_config app_name="{template.ticket_data.app}" config_array="{template.ticket_data.config_array}" /]

		[env.get {template.ticket_data.config_array} set="template.settings_config_array" /]

    [aw_form.validate-form.process 
        form-config='{template.settings_config_array}' 
        set="template.validation_result" 
      /]

		[template.return template.validation_result not_empty="{template.validation_result}" /]

		//** [template.get settings_config_array.col o.exit=t /] **//
    
    [if.not_empty template.settings_config_array.col]
        [loop.@eachAllowedFields template.settings_config_array.col]
            [loop.@eachKey @eachAllowedFields.item.fields.comma]
                [aw2.get @eachKey.item set="template.column" /]
                [aw2.get request.{template.column} set="template.value" /]
                [php.is_array p1="{template.value}" set="template.is_array" /]
                [if.true template.is_array]
                	[template.set value="{template.value.json_encode}" /]
                [/if.true]
                [template.get value set="module.form_meta.{template.column}" /]
            [/loop.@eachKey]
        [/loop.@eachAllowedFields]

					//**  
          	Each meta update, one at a time...
						[query.update_post_meta 
            		post_id="{template.ticket_data.post_id}" 
             		meta_key="{template.column}" 
             		meta_value="{template.value}" /]
          **//

					//** Bulk update meta, Remove single meta update from the loop **//
          [php.json_encode p1="{module.form_meta}" set="template.form_meta_json"/]

          [query.update_post_meta post_id="{template.ticket_data.post_id}"]
             [template.get form_meta_json /]
          [/query.update_post_meta]

    [/if.not_empty]

    <script type="spa/axn" axn="core.run_script" alert="Data updated successfully!"></script>
    <script type="spa/axn" axn="core.run_script">
      setTimeout(function () {
        location.reload();
      }, 2000); 
    </script>
[/templates.add]



[templates.add get_form_config]
		[query.get_post post_type="aw2_app" post_slug="{template.app_name}" set="module.postdata" /]

    [if.not_empty template.app_name]
      [query.get_post post_type="{module.postdata.meta.config_collection}" post_slug="settings" set="module.postdata" /]      
      [env.set postdata="{module.postdata}" /]
    [/if.not_empty]

    [if.not_equal lhs="{{env.get postdata.post_content}}" rhs=""]
				[env.set settings_array]
          [env.get postdata.post_content /][
        [/env.set]
        [env.set settings_array]
          [env.get settings_array /]templates.run settings /]
        [/env.set]
        [aw2.get env.settings_array.run /]
    [/if.not_equal]

[/templates.add]
]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>867866</wp:post_id>
		<wp:post_date><![CDATA[2020-05-21 11:26:55]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-05-21 11:26:55]]></wp:post_date_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[home]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_settings]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[12]]></wp:meta_value>
		</wp:postmeta>
							</item>
				</channel>
</rss>
	